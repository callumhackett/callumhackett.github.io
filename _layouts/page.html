{%- capture main-content -%}
<div id="sidebar">
    {%- unless page.id -%} <!-- when not a blog post -->
    {%- if page.url contains "/tags/" -%} <!-- if it's a tag index page -->
    <div id="sidebar-title">Studio Notes</div>
    <div id="feed-link"><a href="{{ site.url }}/feed.xml">Feed</a></div>
    <div id="tag-title">Tag: {% include tag_formatter.html tag=page.title %}</div>
    {%- else -%} <!-- else, when it's a regular page -->
    <div id="sidebar-title">{{ page.title | smartify }}</div>
    {%- endif -%}
    {%- if page.title == 'Studio Notes' -%}
    <div id="feed-link"><a href="{{ site.url }}/feed.xml">Feed</a></div>
    {%- endif -%}
    {%- endunless -%}
    {%- if page.id -%} <!-- when a blog post -->
    <div id="sidebar-title">Studio Notes</div>
    <div id="feed-link"><a href="{{ site.url }}/feed.xml">Feed</a></div>
    {%- endif -%}
    <div id="sidebar-post-tags" class="post-tags">
    {%- for tag in page.tags -%}
    {% include tag_formatter.html tag=tag %}<br/>
    {%- endfor -%}
    </div>
</div>
<div id="page-content">
    {%- unless page.list -%}
    {%- if page.id -%}
    <div id="post-date">{% include date_formatter.html date=page.date %}</div>
    {%- endif -%}
    {{ content | smartify }}
    {%- if page.id -%}
    {% include giscus_comments.html reactions="1" %}
    {%- endif -%}
    {%- endunless -%}
    {%- if page.list -%}
    <div id="list-of-works">{{ content | smartify }}</div>
    {%- endif -%}
</div>
<div id="mobile-post-tags" class="post-tags">
    {%- for tag in page.tags -%}
    {% include tag_formatter.html tag=tag %}&#32;
    {%- endfor -%}
</div>
<div id="empty-row"></div> <!-- this adds end-screen padding without affecting the auto size of the first row -->
{%- endcapture -%}

{% include main.html css="page" main-content=main-content %}